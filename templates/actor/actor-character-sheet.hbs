<form class="sw25-character-sheet {{cssClass}} {{actor.type}} flexcol" autocomplete="off">
  {{!-- Sheet Header --}}
  <header class="sw25cs__header">
    <section class="togglearea">
      <label class="togglearea__btn">
        <input id="{{actor._id}}isEdit" type="checkbox" name="system.isEdit" {{#if system.isEdit}}checked{{/if}} data-dtype="Boolean"/>
        <span class="togglearea__btn--slider"><i class="fa-solid fa-wrench"></i></span>
      </label>
    </section>

    <div class="adventurer-details textalign-center">
      <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
      <div class="header-resources">
        <div class="resources flexcol">
          {{#unless system.toFellow}}
          <div class="hpbar">
            <div class="hp-progress-bar">
              <progress class="hp-bar grid-span-3" value="{{system.hp.value}}" max="{{system.hp.max}}"></progress>
              <div class="current-max-resource nobreak">
                <input id="{{actor._id}}hp" type="number" name="system.hp.value" value="{{system.hp.value}}" data-dtype="Number"/>
                <span class="inline-block">/ {{system.hp.max}}</span>
              </div>
            </div>
            <div class="hpmod nobreak" style="font-size: 0.7rem; display: flex; align-items: center; justify-content: end; height: 20px;">
              <label for="{{actor._id}}hpmod" class="resource-label">{{localize "SW25.Modifier"}}: </label>
              <input id="{{actor._id}}hpmod" style="height: 80%; color:#fff;" type="number" name="system.hp.hpmod" value="{{system.hp.hpmod}}" data-dtype="Number"/>
            </div>
          </div>
          {{/unless}}
          <div class="mpbar">
            <div class="mp-progress-bar">
              <progress class="mp-bar grid-span-3" value="{{system.mp.value}}" max="{{system.mp.max}}"></progress>
              <div class="current-max-resource nobreak">
                <input id="{{actor._id}}mp" type="number" name="system.mp.value" value="{{system.mp.value}}" data-dtype="Number"/>
                <span class="inline-block">/ {{system.mp.max}}</span>
              </div>
            </div>
            <div class="mpmod nobreak"  style="font-size: 0.7rem; display: flex; align-items: center; justify-content: end; height: 20px;">
              <label for="{{actor._id}}mpmod" class="resource-label">{{localize "SW25.Modifier"}}: </label>
              <input id="{{actor._id}}mpmod" style="height: 80%; color:#fff;" type="number" name="system.mp.mpmod" value="{{system.mp.mpmod}}" data-dtype="Number"/>
            </div>
          </div>
          {{#if system.toFellow}}
          <div class="roll-actiontable action-button rollable"><i class="fas fa-dice-d6"></i>{{localize "SW25.ActionRoll"}}</div>
          {{/if}}
        </div>
      </div>
    </div>

    <div>
      <div style="display:flex;">
        <div>
          <h1>
          {{#if system.isEdit}}
            <input id="{{actor._id}}name" name="name" type="text" value="{{actor.name}}" placeholder="Name"/>
          {{else}}
            {{actor.name}}
          {{/if}}
          </h1>
        </div>

        <div class="character-fellow">
          <label for="{{actor._id}}fellow" class="resource-label">{{localize "SW25.Fellow"}}</label> <br>
          <div class="toggle-area">
            <label class="common-toggle">
              <input id="{{actor._id}}fellow" type="checkbox" name="system.toFellow" {{#if system.toFellow}}checked{{/if}} data-dtype="Boolean"/>
            </label>
          </div>
        </div>
        <div class="character-grace">
          <label for="{{actor._id}}grace" class="resource-label">{{localize "SW25.Attributes.Grace"}}</label> <br>
          <div class="toggle-area">
            <label class="common-toggle">
              <input id="{{actor._id}}grace" type="checkbox" name="system.attributes.grace" {{#if system.attributes.grace}}checked{{/if}} data-dtype="Boolean"/>
            </label>
          </div>
        </div>

        <div class="character-al inline-block level-container">
          <i class="fas fa-bolt"></i>
          <span class="nobreak level-label">{{localize "SW25.Attributes.Advlevel"}}</span>
          <span class="adventurer-level level-value" style="color:#44f;-webkit-text-stroke: 1px #f88;">{{system.attributes.advlevel.value}}</span>
        </div>
      </div>
      <div>
        <div class="character-details-secondary textalign-center flexrow">
          {{#if system.isEdit}}
            <div class="character-rank">
              <input id="{{actor._id}}rank" type="text" name="system.attributes.honer.rank" value="{{system.attributes.honer.rank}}" placeholder="{{localize "SW25.Attributes.Honer.Rank"}}" data-dtype="String"/>
            </div>
            <div class="character-race">
              <input id="{{actor._id}}race" type="text" name="system.race" value="{{system.race}}" placeholder="{{localize "SW25.Race"}}" data-dtype="String"/>
            </div>
            <div class="character-age">
              <input id="{{actor._id}}age" type="number" name="system.attributes.age" value="{{system.attributes.age}}" placeholder="{{localize "SW25.Attributes.Age"}}" data-dtype="Number"/>
            </div>
            <div class="character-gender">
              <input id="{{actor._id}}gender" type="text" name="system.attributes.gender" value="{{system.attributes.gender}}" placeholder="{{localize "SW25.Attributes.Gender"}}" data-dtype="String"/>
            </div>
          {{else}}
            <div class="character-rank">
              <i class="fa-solid fa-medal"></i>{{system.attributes.honer.rank}}
            </div>
            <div class="character-race">
              {{system.race}}
            </div>
            <div class="character-age">
              {{system.attributes.age}}
            </div>
            <div class="character-gender">
              {{system.attributes.gender}}
            </div>
          {{/if}}
          <div class="character-fumble">
            <label for="{{actor._id}}fumble" class="resource-label">{{localize "SW25.Attributes.Fumble"}}</label>
            <div class="adjustable-container">
              <a class="adjustment-button" data-action="decrease" data-property="system.attributes.fumble">
                <i class="fas fa-minus"></i>
              </a>
              <input id="{{actor._id}}fumble" style="color:#fff;" type="number" name="system.attributes.fumble" value="{{system.attributes.fumble}}" data-dtype="Number"/>
              <a class="adjustment-button" data-action="increase" data-property="system.attributes.fumble">
                <i class="fas fa-plus"></i>
              </a>
            </div>
          </div>
        </div>
        <hr>
        <div class="character-details-tertiary textalign-center flexrow">
          {{#if contentItem.vitRes}}
            {{#with contentItem.vitRes as |item|}}
            <span class="common-display item" data-item-id='{{item._id}}'>
              <span class='rollable' data-roll="{{item.system.formula}}+{{item.system.checkbase}}" data-label="{{item.name}}" data-pt="{{item.system.powertable}}" data-apply="{{item.system.applycheck}}" data-checktype="{{item.system.checkTypesButton}}">
                <span class="common-label">{{localize "SW25.Config.ResVit"}}</span>
                <span class="common-value">{{item.system.checkbase}}</span>
                <span class="common-icon icon-top"><i class="fa-solid fa-dice"></i></span>
              </span>
              <span class="tooltip mod-content" style="text-align: right;">
                <label class="mod-label">
                  <i class="fa-solid fa-angles-up"></i><span class="tooltip-text">{{localize "SW25.Effect.MppMod"}}</span></label>
                  <input class="cm-change" style="max-width: 60%; height: 1.5em;" type="text" name="checkmodInput" value="{{item.system.checkmod}}" data-dtype="Number"/>
              </span>
            </span>
            {{/with}}
          {{else}}
            <span class="common-display">
            <span class="common-label">{{localize "SW25.Config.ResVit"}}</span>
            <span class="common-value"> - </span>
            </span>
          {{/if}}
          {{#if contentItem.mndRes}}
            {{#with contentItem.mndRes as |item|}}
            <span class="common-display item" data-item-id='{{item._id}}'>
              <span class='rollable' data-roll="{{item.system.formula}}+{{item.system.checkbase}}" data-label="{{item.name}}" data-pt="{{item.system.powertable}}" data-apply="{{item.system.applycheck}}" data-checktype="{{item.system.checkTypesButton}}">
                <span class="common-label">{{localize "SW25.Config.ResMnd"}}</span>
                <span class="common-value">{{item.system.checkbase}}</span>
                <span class="common-icon icon-top"><i class="fa-solid fa-dice"></i></span>
              </span>
              <span class="tooltip mod-content" style="text-align: right;">
                <label class="mod-label">
                  <i class="fa-solid fa-angles-up"></i><span class="tooltip-text">{{localize "SW25.Effect.MppMod"}}</span></label>
                  <input class="cm-change" style="max-width: 60%; height: 1.5em;" type="text" name="checkmodInput" value="{{item.system.checkmod}}" data-dtype="Number"/>
              </span>
            </span>
            {{/with}}
          {{else}}
            <span class="common-display">
            <span class="common-label">{{localize "SW25.Config.ResMnd"}}</span>
            <span class="common-value"> - </span>
            </span>
          {{/if}}
          <span class="common-display">
            <span class="common-label">{{localize "SW25.Attributes.Protectionpoint.long"}}</span>
            <span class="common-value">{{system.attributes.protectionpoint}}{{#if system.baredreduce}} ({{system.barepp}}+{{system.baredreduce}}){{/if}}</span>
            <span class="tooltip mod-content" style="text-align: right;">
              <label class="mod-label" for="{{actor._id}}system.attributes.ppmod">
                <i class="fa-solid fa-shield"></i><i class="fa-solid fa-angles-up"></i><span class="tooltip-text">{{localize "SW25.Effect.PpMod"}}</span></label>
              <input id="{{actor._id}}system.attributes.ppmod" class="mod-input" style="max-width: 60%; height: 1.5em;" type="text" name="system.attributes.ppmod" value="{{system.attributes.ppmod}}" data-dtype="Number"/>
            </span>
          </span>
          <span class="common-display">
            <span class="common-label">{{localize "SW25.Attributes.Magicprotection.long"}}</span>
            <span class="common-value">{{system.attributes.magicprotection}}{{#if system.baredreduce}} ({{system.barempp}}+{{system.baredreduce}}){{/if}}</span>
            <span class="tooltip mod-content" style="text-align: right;">
              <label class="mod-label" for="{{actor._id}}system.attributes.mppmod">
                <i class="fa-solid fa-star-of-david"></i><i class="fa-solid fa-angles-up"></i><span class="tooltip-text">{{localize "SW25.Effect.MppMod"}}</span></label> <input id="{{actor._id}}system.attributes.mppmod" class="mod-input" style="max-width: 60%; height: 1.5em;" type="text" name="system.attributes.mppmod" value="{{system.attributes.mppmod}}" data-dtype="Number"/>
            </span>
          </span>
          <span class="common-display">
            <div class="flexrow grid grid-3col gap-m nomargin">
              <div>
                <span class="common-label tooltip">
                  <span class="tooltip-text">{{localize "SW25.Attributes.Limitedmove"}}</span>
                  <i class="fa-solid fa-person-walking-with-cane"></i>
                </span>
                <span class="common-value">{{system.attributes.move.limited}}</span>
              </div>
              <div>
                <span class="common-label tooltip">
                  <span class="tooltip-text">{{localize "SW25.Attributes.Normalmove"}}</span>
                  <i class="fa-solid fa-person-walking"></i>
                </span>
                <span class="common-value">{{system.attributes.move.normal}}</span>
              </div>
              <div>
                <span class="common-label tooltip">
                  <span class="tooltip-text">{{localize "SW25.Attributes.Maxmove"}}</span>
                  <i class="fa-solid fa-person-running"></i>
                </span>
                <span class="common-value">{{system.attributes.move.max}}</span>
              </div>
              <div class="flexcol grid-span-3">
                <span class="tooltip" style="text-align: center;">
                  <label for="{{actor._id}}system.attributes.move.movemod"><i class="fa-solid fa-person-running"></i><i class="fa-solid fa-angles-up"></i><span class="tooltip-text">{{localize "SW25.Attributes.Movemod"}}</span></label>
                  <input id="{{actor._id}}system.attributes.move.movemod" style="max-width: 60%; height: 1.5em;" type="text" name="system.attributes.move.movemod" value="{{system.attributes.move.movemod}}" data-dtype="Number"/></span>
              </div>
            </div>
          </span>

          <div class="character-blank">
          </div>

        </div>
      </div>
    </div>

  </header>

  <!-- サイドバー開閉・タブ切り替え用の入力 -->

  <main class="sw25cs__body">

    <section class="sw25cs__body__sidebar">
      <input id="sw25-toggle-sidebar" type="checkbox" name="system.isSidebar" {{#if system.isSidebar}}checked{{/if}} data-dtype="Boolean" hidden/>
      <label for="sw25-toggle-sidebar" class="sw25-sidebar-toggle"></label>

      <aside class="sw25cs__body__sidebar__contents">
        <nav class="sidebar-tabs tabs" data-group="sidebar">
          {{!-- Default tab is specified in actor-sheet.mjs --}}
          <a class="item tooltip" data-tab="status">
            <span class="tooltip-text">{{localize "SW25.Status"}}</span>
            <i class="fa-solid fa-square-poll-vertical"></i>
          </a>
          <a class="item nobreak tooltip" data-tab="battle">
            <span class="tooltip-text">{{localize "SW25.Battle"}}</span>
            <i class="fa-solid fa-hand-back-fist"></i>
          </a>
          <a class="item tooltip" data-tab="adventure">
            <span class="tooltip-text">{{localize "SW25.Adventure"}}</span>
            <i class="fa-solid fa-magnifying-glass"></i>
          </a>
        </nav>
        
        <section class="sidebar-body">
          {{!-- Actor-status tabs --}}
          <div class="tab status" data-group="sidebar" data-tab="status" data-scrollable="true" id="sidebar-status">
            <div class="abilities flexcol">
              <div class="grid grid-5col">
                {{#each system.abilities as |ability key|}}
                  {{#if ../system.isEdit}}
                    {{#if (isEven @index)}}
                      <div class="grid-row-span-2 textalign-center">
                        <label for="{{../actor._id}}{{key}}ability-racevalue" class="resource-label-s">{{localizeAbility key}}</label>
                        <input id="{{../actor._id}}{{key}}ability-racevalue" class="racevalue-input" type="number" name="system.abilities.{{key}}.racevalue" value="{{ability.racevalue}}" data-dtype="Number"/>
                      </div>
                      {{/if}}
                    <div class="textalign-center">
                      <label for="{{../actor._id}}{{key}}ability-valuebase" class="resource-label-s">{{ability.basename}}</label>
                      <input id="{{../actor._id}}{{key}}ability-valuebase" class="resource-input" type="number" name="system.abilities.{{key}}.valuebase" value="{{ability.valuebase}}" data-dtype="Number"/>
                    </div>
                    <div class="textalign-center">
                      <label for="{{../actor._id}}{{key}}ability-valuegrowth" class="growth-label" data-tooltip="{{localize "SW25.Ability.Growth"}}">{{growth @index}}</label>
                      <input id="{{../actor._id}}{{key}}ability-valuegrowth" class="resource-input" type="number" name="system.abilities.{{key}}.valuegrowth" value="{{ability.valuegrowth}}" data-dtype="Number"/>
                    </div>
                    <div class="textalign-center">
                      <label for="{{../actor._id}}{{key}}ability-valuemodify" class="resource-label-s">{{localize "SW25.Ability.Modify"}}</label>
                      <input id="{{../actor._id}}{{key}}ability-valuemodify" class="resource-input" type="number" name="system.abilities.{{key}}.valuemodify" value="{{ability.valuemodify}}" data-dtype="Number"/>
                    </div>
                    <div class="textalign-center">
                      <div class="resource-label flexlarge" data-label="{{ability.label}}">{{ability.label}}</div>
                      <div class="ability-mod resource-label-l" style="font-size: 1.2em;" data-label="{{ability.label}}">{{ability.value}} ({{numberFormat ability.mod decimals=0 sign=true}})</div>
                    </div>
                  {{else}}
                    {{#if (isEven @index)}}
                      <div class="grid-row-span-2 textalign-center">
                        <label class="resource-label-s">{{localizeAbility key}}</label>
                        <input class="racevalue-input" type="number" value="{{ability.racevalue}}" disabled/>
                      </div>
                    {{/if}}
                    <div class="textalign-center">
                      <label class="resource-label-s">{{ability.basename}}</label>
                      <input class="resource-input" type="number" value="{{ability.valuebase}}" disabled/>
                    </div>
                    <div class="textalign-center">
                      <label class="growth-label" data-tooltip="{{localize "SW25.Ability.Growth"}}">{{growth @index}}</label>
                      <input class="resource-input" type="number" value="{{ability.valuegrowth}}" disabled/>
                    </div>
                    <div class="textalign-center">
                      <label for="{{../actor._id}}{{key}}ability-valuemodify" class="resource-label-s">{{localize "SW25.Ability.Modify"}}</label>
                      <input id="{{../actor._id}}{{key}}ability-valuemodify" class="resource-input" type="number" name="system.abilities.{{key}}.valuemodify" value="{{ability.valuemodify}}" data-dtype="Number"/>
                    </div>
                    <div class="textalign-center">
                      <div class="resource-label flexlarge" data-label="{{ability.label}}">{{ability.label}}</div>
                      <div class="ability-mod resource-label-l" style="font-size: 1.2em;" data-label="{{ability.label}}">{{ability.value}} ({{numberFormat ability.mod decimals=0 sign=true}})</div>
                    </div>
                  {{/if}}
                {{/each}}
              </div>
              <div class="roll-ability-check growth-button rollable"><i class="fa-solid fa-dice"></i>{{localize "SW25.Ability.Growth"}}</div>

              {{!-- <section class="main grid-span-3">
                <div>
                  {{> "systems/sw25/templates/actor/parts/actor-skills.hbs"}}
                </div>
              </section> --}}
            </div>
          </div>
          
          {{!-- Actor-battle tabs --}}
          <div class="tab battle" data-group="sidebar" data-tab="battle" data-scrollable="true" id="sidebar-battle">
            <div class="grid grid-3col margin-s">
              <div class="flexcol grid-span-3">
                <div class="flexrow grid grid-3col gap-m nomargin">
                  <span class="rollable common-display" data-resusequantity={{system.resusequantity}} data-resuse="{{system.resuse}}" data-roll="{{system.itemhitformula}}+{{system.itemhitbase}}" data-label="{{system.itemname}} ({{localize "SW25.Item.Weapon.Hit"}})" data-pt="{{system.itempowertable}}" data-apply="{{system.itemapplycheck}}" data-checktype="{{system.itemchecktype}}" data-resist="{{localize "SW25.Resist.Check.Dodge"}}" data-resistresult="disappear">
                    <span class="common-label">{{localize "SW25.Item.Weapon.Hit"}}</span>
                    <span class="common-value">{{system.itemhitbase}}</span>
                    <span class="common-icon icon-top"><i class="fa-solid fa-dice"></i></span>
                  </span>
                  <span class="powerrollable common-display" data-roll="{{system.itempowerformula}}" data-label="{{system.itemname}} ({{localize "SW25.Item.Power"}})" data-pt="{{system.itempowertable}}" data-apply="{{system.itemapplypower}}" data-powertype="{{system.itempowertype}}">
                    <span class="common-label">{{localize "SW25.Item.Power"}}</span>
                    <span class="common-value">k{{system.itempower}}{{#if system.itemcvalue}}@{{system.itemcvalue}}{{/if}}{{#if system.itempowerbase}}+{{system.itempowerbase}}{{/if}}</span>
                    <span class="common-icon icon-top"><i class="fa-solid fa-dice"></i></span>
                  </span>
                  <span class="rollable common-display" data-roll="2d6+{{system.dodgebase}}" data-label="{{localize "SW25.Item.Armor.Dodge"}}" data-pt="">
                    <span class="common-label">{{localize "SW25.Item.Armor.Dodge"}}</span>
                    <span class="common-value">{{system.dodgebase}}</span>
                    <span class="common-icon icon-top"><i class="fa-solid fa-dice"></i></span>
                  </span>
                </div>
                <div>
                  {{> "systems/sw25/templates/actor/parts/actor-resources.hbs"}}
                </div>
              </div>
            </div>
            <div class="grid grid-4col gap-s">
              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.hitmod"><i class="fa-solid fa-bullseye"></i><span class="tooltip-text">{{localize "SW25.Effect.HitMod"}}</span></label> <input id="{{actor._id}}system.attributes.hitmod" class="mod-input" type="text" name="system.attributes.hitmod" value="{{system.attributes.hitmod}}" data-dtype="Number"/></span>
              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.dmod"><i class="fa-solid fa-hand-fist"></i><span class="tooltip-text">{{localize "SW25.Effect.DamageMod"}}</span></label> <input id="{{actor._id}}system.attributes.dmod" class="mod-input" type="text" name="system.attributes.dmod" value="{{system.attributes.dmod}}" data-dtype="Number"/></span>
              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.ltmod"><i class="fa-solid fa-hashtag"></i><span class="tooltip-text">{{localize "SW25.Effect.LethalTech"}}</span></label> <input id="{{actor._id}}system.attributes.ltmod" class="mod-input" type="text" name="system.attributes.ltmod" value="{{system.attributes.ltmod}}" data-dtype="Number"/></span>
              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.crmod"><i class="fa-solid fa-dollar-sign"></i><span class="tooltip-text">{{localize "SW25.Effect.CriticalRay"}}</span></label> <input id="{{actor._id}}system.attributes.crmod" class="mod-input" type="text" name="system.attributes.crmod" value="{{system.attributes.crmod}}" data-dtype="Number"/></span>

              <span class="grid-span-4" style="text-align: right;">
                <select name="system.hitweapon">
                  {{#select system.hitweapon}}
                  <option value="-">{{localize "SW25.Selecthitweapon"}}</option>
                  {{#each battleweapons as |item id|}}
                  <option value="{{item.name}}">{{item.name}}</option>
                  {{/each}}
                  {{/select}}
                </select>
                <select name="system.attackskill">
                  {{#select system.attackskill}}
                  <option value="-">{{localize "SW25.Selectattackskill"}}</option>
                  {{#each skills as |item id|}}
                  <option value="{{item.name}}">{{item.name}}</option>
                  {{/each}}
                  {{/select}}
                </select>
              </span>

              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.dodgemod"><i class="fa-solid fa-wind"></i><span class="tooltip-text">{{localize "SW25.Effect.DodgeMod"}}</span></label> <input id="{{actor._id}}system.attributes.dodgemod" class="mod-input" type="text" name="system.attributes.dodgemod" value="{{system.attributes.dodgemod}}" data-dtype="Number"/></span>
              <span class="tooltip mod-content" style="text-align: right;"><label class="mod-label" for="{{actor._id}}system.attributes.dreduce"><i class="fa-solid fa-shield-halved"></i><span class="tooltip-text">{{localize "SW25.Effect.Dreduce"}}</span></label> <input id="{{actor._id}}system.attributes.dreduce" class="mod-input" type="text" name="system.attributes.dreduce" value="{{system.attributes.dreduce}}" data-dtype="Number"/></span>
              <span class="grid-span-4" style="text-align: right;">
                <select name="system.dodgeskill">
                  {{#select system.dodgeskill}}
                  <option value="-">{{localize "SW25.Selectdodgeskill"}}</option>
                  {{#each skills as |item id|}}
                  <option value="{{item.name}}">{{item.name}}</option>
                  {{/each}}
                  {{/select}}
                </select>
              </span>

              <div class="grid-span-4">
                {{> "systems/sw25/templates/actor/parts/actor-battlechecks.hbs"}}
              </div>        

            </div>
          </div>

          {{!-- Actor-adventure tabs --}}
          <div class="tab adventure" data-group="sidebar" data-tab="adventure" data-scrollable="true" id="sidebar-adventure">
          {{> "systems/sw25/templates/actor/parts/actor-checks.hbs"}}
          </div>

        </section>
      </aside>
    </section>

    <section class="sw25cs__body__main">


  {{#unless system.toFellow}}
  {{!-- Sheet Tab Navigation --}}
      <!-- 栞のようなタブ切り替え -->
      <nav class="sw25-tab-switcher sheet-tabs" data-group="primary">
        <a class="tooltip sw25-tab-label" data-tab="check"><span class="tooltip-tabs">{{localize "SW25.Check"}}</span><i class="fa-solid fa-cube"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="battle"><span class="tooltip-tabs">{{localize "SW25.Equip"}}</span><i class="fa-solid fa-shield"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="features"><span class="tooltip-tabs">{{localize "SW25.Features"}}</span><i class="fa-solid fa-hands-holding-circle"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="spells"><span class="tooltip-tabs">{{localize "SW25.Spells"}}</span><i class="fa-solid fa-book-tanakh"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="effects"><span class="tooltip-tabs">{{localize "SW25.Effects"}}</span><i class="fa-solid fa-hand-sparkles"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="items"><span class="tooltip-tabs">{{localize "SW25.Items"}}</span><i class="fa-solid fa-suitcase"></i></a>
        <a class="tooltip sw25-tab-label" data-tab="description"><span class="tooltip-tabs">{{localize "SW25.Description"}}</span><i class="fa-solid fa-id-card"></i></a>
      </nav>

  {{!-- Sheet Body --}}
  <section class="sheet-body" data-scrollable="true" id="main-contents">

    {{!-- Check Tab --}}
    <div class="tab check" data-group="primary" data-tab="check">
      <section class="grid grid-5col margin-s">
        <section class="main grid-span-5">
          {{> "systems/sw25/templates/actor/parts/actor-checkskills.hbs"}}
        </section>

      </section>
    </div>

    {{!--  Battle Tab --}}
    <div class="tab battle flexcol" data-group="primary" data-tab="battle">
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-battleweapons.hbs"}}
      </div>
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-battlearmors.hbs"}}
      </div>
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-battleaccessories.hbs"}}
      </div>
    </div>

    {{!-- Owned Features Tab --}}
    <div class="tab features" data-group="primary" data-tab="features">
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-raceabilities.hbs"}}
      </div>
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-combatabilities.hbs"}}
      </div>
      {{#if eashow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-enhancearts.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-enhancearts.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if msshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-magicalsongs.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-magicalsongs.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if rtshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-ridingtricks.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-ridingtricks.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if atshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-alchemytechs.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-alchemytechs.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if pashow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-phaseareas.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-phaseareas.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if tcshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-tactics.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-tactics.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if ifshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-infusion.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-infusion.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if bsshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-barbarousskill.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-barbarousskill.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if ewshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-essenceweave.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-essenceweave.hbs"}}
      </div>
      {{/if}}{{/if}}
      {{#if ofshow}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-otherfeature.hbs"}}
      </div>
      {{else}}{{#if system.attributes.showfeature}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-otherfeature.hbs"}}
      </div>
      {{/if}}{{/if}}
      <div class="margin-m" style="display: flex; align-items: center;">
        <input type="checkbox" id="{{actor._id}}system.attributes.showfeature" name="system.attributes.showfeature" data-dtype="Boolean" {{#if system.attributes.showfeature}} checked {{/if}}/>
        <label for="{{actor._id}}system.attributes.showfeature">{{localize "SW25.Attributes.Showfeature"}}</label>
      </div>
    </div>


    {{!-- Owned Spells Tab --}}
    <div class="tab spells" data-group="primary" data-tab="spells">
      {{#if scshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Sorcerer"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.sccast}}" data-label="{{localize "SW25.Item.Spell.Sorcerer"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.scpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.scskill">
              {{#select system.scskill}}
              <option value="-">{{localize "SW25.Selectspellskill"}}</option>
              {{#each skills as |item id|}}
              <option value="{{item.name}}">{{item.name}}</option>
              {{/each}}
              {{/select}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.scmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.scmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.scmod" value="{{system.attributes.scmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-sorcerer.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if cnshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Conjurer"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.cncast}}" data-label="{{localize "SW25.Item.Spell.Conjurer"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.cnpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.cnskill">
              {{#select system.cnskill}}
              <option value="-">{{localize "SW25.Selectspellskill"}}</option>
              {{#each skills as |item id|}}
              <option value="{{item.name}}">{{item.name}}</option>
              {{/each}}
              {{/select}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.cnmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.cnmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.cnmod" value="{{system.attributes.cnmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-conjurer.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if wzshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Wizard"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.wzcast}}" data-label="{{localize "SW25.Item.Spell.Wizard"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.wzpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.wzskill">
              {{selectOptions skills selected=system.wzskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.wzmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.wzmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.wzmod" value="{{system.attributes.wzmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-wizard.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if prshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Priest"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.prcast}}" data-label="{{localize "SW25.Item.Spell.Priest"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.prpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.prskill">
              {{selectOptions skills selected=system.prskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.prmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.prmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.prmod" value="{{system.attributes.prmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-priest.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if mtshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Magitech"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.mtcast}}" data-label="{{localize "SW25.Item.Spell.Magitech"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.mtpower}}</span>
          <span class="rollable resource-label-l grid-span-2" style="text-align: center;" data-resusequantity={{system.resusequantity}} data-resuse="{{system.resuse}}" data-roll="{{system.itemhitformula}}+{{system.itemhitbase}}" data-label="{{system.itemname}} ({{localize "SW25.Item.Weapon.Hit"}})" data-pt="{{system.itempowertable}}" data-apply="{{system.itemapplycheck}}" data-checktype="{{system.itemchecktype}}">{{localize "SW25.Item.Weapon.Hit"}} : {{system.itemhitbase}}</span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.mtskill">
              {{selectOptions skills selected=system.mtskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.mtmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.mtmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.mtmod" value="{{system.attributes.mtmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-magitech.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if frshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Fairy"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.frcast}}" data-label="{{localize "SW25.Item.Spell.Fairy"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.frpower}}</span>
          <span class="grid-span-2">
            <div class="fairy-checkbox">
              <label class="fairy-contract f-earth {{#if system.attributes.fairy.earth}}checked{{/if}}" data-path="system.attributes.fairy.earth">{{localize "SW25.Item.Spell.FairyContract.Earth"}}</label>
              <label class="fairy-contract f-water {{#if system.attributes.fairy.water}}checked{{/if}}" data-path="system.attributes.fairy.water">{{localize "SW25.Item.Spell.FairyContract.Water"}}</label>
              <label class="fairy-contract f-fire {{#if system.attributes.fairy.fire}}checked{{/if}}" data-path="system.attributes.fairy.fire">{{localize "SW25.Item.Spell.FairyContract.Fire"}}</label>
              <label class="fairy-contract f-wind {{#if system.attributes.fairy.wind}}checked{{/if}}" data-path="system.attributes.fairy.wind">{{localize "SW25.Item.Spell.FairyContract.Wind"}}</label>
              <label class="fairy-contract f-light {{#if system.attributes.fairy.light}}checked{{/if}}" data-path="system.attributes.fairy.light">{{localize "SW25.Item.Spell.FairyContract.Light"}}</label>
              <label class="fairy-contract f-dark {{#if system.attributes.fairy.dark}}checked{{/if}}" data-path="system.attributes.fairy.dark">{{localize "SW25.Item.Spell.FairyContract.Dark"}}</label>
            </div>
            <span class="fairy-rank">{{localize "SW25.Item.Spell.FairyContract.Rank"}}:{{system.frRank}}</span>
          </span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.frskill">
              {{selectOptions skills selected=system.frskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.frmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.frmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.frmod" value="{{system.attributes.frmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-fairy.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if drshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Druid"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.drcast}}" data-label="{{localize "SW25.Item.Spell.Druid"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.drpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.drskill">
              {{selectOptions skills selected=system.drskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.drmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.drmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.drmod" value="{{system.attributes.drmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-druid.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if dmshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Daemon"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.dmcast}}" data-label="{{localize "SW25.Item.Spell.Daemon"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.dmpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.dmskill">
              {{selectOptions skills selected=system.dmskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.dmmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.dmmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.dmmod" value="{{system.attributes.dmmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-daemon.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      {{#if abshow}}
      <div class="item flexrow">
        <div class="grid grid-12col">
          <span class="spelllist-label resource-label-l grid-span-2">{{localize "SW25.Item.Spell.Abyssal"}}</span>
          <span class="rollable resource-label-l grid-span-2" data-roll="2d6+{{system.attributes.abcast}}" data-label="{{localize "SW25.Item.Spell.Abyssal"}}" data-pt="" data-spell="on" data-apply="-" data-checktype="">{{localize "SW25.Attributes.Magicpower"}} : {{system.attributes.abpower}}</span>
          <span class="grid-span-2"></span>
          <span class="grid-span-4" style="text-align: right;">
            <select name="system.abskill">
              {{selectOptions skills selected=system.abskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Selectspellskill"}}
            </select>
          </span>
          <span class="grid-span-2" style="text-align: right;"><label for="{{actor._id}}system.attributes.abmod"><i class="fa-solid fa-angles-up"></i></label><input id="{{actor._id}}system.attributes.abmod" style="max-width: calc(70% - 7px); text-align: center;" type="text" name="system.attributes.abmod" value="{{system.attributes.abmod}}" data-dtype="Number"/></span>
        </div>
        <div class="spelllist-description">
          <div>
            {{> "systems/sw25/templates/actor/parts/actor-spells-abyssal.hbs"}}
          </div>
        </div>
      </div>
      {{/if}}
      <div class="margin-m" style="display: flex; align-items: center;">
        <input type="checkbox" id="{{actor._id}}system.attributes.showspell" name="system.attributes.showspell" data-dtype="Boolean" {{#if system.attributes.showspell}} checked {{/if}}/>
        <label for="{{actor._id}}system.attributes.showspell">{{localize "SW25.Attributes.Showspell"}}</label>
      </div>
      {{#if system.attributes.showspell}}
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-spells.hbs"}}
      </div>
      {{/if}}
    </div>

    {{!-- Active Effects Tab --}}
    <div class="tab effects flexcol" data-group="primary" data-tab="effects">
      <div class="flexcol margin-l gap-m">
        <div class="resource-label-l">{{localize "SW25.Effect.TotalEffects"}}</div>
        <div class="grid grid-4col">
          {{#if system.totalhitmod}}<div><b>{{localize "SW25.Effect.HitMod"}}: {{system.totalhitmod}}</b></div>{{/if}}
          {{#if system.totaldmod}}<div><b>{{localize "SW25.Effect.DamageMod"}}: {{system.totaldmod}}</b></div>{{/if}}
          {{#if system.totalcmod}}<div><b>{{localize "SW25.Effect.CMod"}}: {{system.totalcmod}}</b></div>{{/if}}
          {{#if system.totalspcmod}}<div><b>{{localize "SW25.Effect.SpCMod"}}: {{system.totalspcmod}}</b></div>{{/if}}
          {{#if system.totallt}}<div><b>{{localize "SW25.Effect.LethalTech"}}: {{system.totallt}}</b></div>{{/if}}
          {{#if system.totalcr}}<div><b>{{localize "SW25.Effect.CriticalRay"}}: {{system.totalcr}}</b></div>{{/if}}
          {{#if system.totalwphalfmod}}<div><b>{{localize "SW25.Effect.WeaponHalfMod"}}: {{system.totalwphalfmod}}</b></div>{{/if}}
          {{#if system.totalsphalfmod}}<div><b>{{localize "SW25.Effect.SpellHalfMod"}}: {{system.totalsphalfmod}}</b></div>{{/if}}
          {{#if system.totaldodgemod}}<div><b>{{localize "SW25.Effect.DodgeMod"}}: {{system.totaldodgemod}}</b></div>{{/if}}
          {{#if system.totalppmod}}<div><b>{{localize "SW25.Effect.PpMod"}}: {{system.totalppmod}}</b></div>{{/if}}
          {{#if system.totalmppmod}}<div><b>{{localize "SW25.Effect.MppMod"}}: {{system.totalmppmod}}</b></div>{{/if}}
          {{#if system.totaldreduce}}<div><b>{{localize "SW25.Effect.Dreduce"}}: {{system.totaldreduce}}</b></div>{{/if}}
          {{#if system.totalmovemod}}<div><b>{{localize "SW25.Effect.MoveMod"}}: {{system.totalmovemod}}</b></div>{{/if}}
          {{#if system.totalhpregenmod}}<div><b>{{localize "SW25.Effect.HpregenMod"}}: {{system.totalhpregenmod}}</b></div>{{/if}}
          {{#if system.totalmpregenmod}}<div><b>{{localize "SW25.Effect.MpregenMod"}}: {{system.totalmpregenmod}}</b></div>{{/if}}
          {{#if system.totalvitres}}<div><b>{{localize "SW25.Config.ResVit"}}: {{system.totalvitres}}</b></div>{{/if}}
          {{#if system.totalmndres}}<div><b>{{localize "SW25.Config.ResMnd"}}: {{system.totalmndres}}</b></div>{{/if}}
          {{#if system.totalinit}}<div><b>{{localize "SW25.Config.Init"}}: {{system.totalinit}}</b></div>{{/if}}
          {{#if system.totalmknow}}<div><b>{{localize "SW25.Config.MKnow"}}: {{system.totalmknow}}</b></div>{{/if}}
          {{#if system.totalallck}}<div><b>{{localize "SW25.Config.AllCk"}}: {{system.totalallck}}</b></div>{{/if}}
          {{#if system.totalallsk}}<div><b>{{localize "SW25.Config.AllSk"}}: {{system.totalallsk}}</b></div>{{/if}}
          {{#if system.totalhpmod}}<div><b>{{localize "SW25.Effect.HpMod"}}: {{system.totalhpmod}}</b></div>{{/if}}
          {{#if system.totalmpmod}}<div><b>{{localize "SW25.Effect.MpMod"}}: {{system.totalmpmod}}</b></div>{{/if}}
          {{#if system.totaldex}}<div><b>{{localize "SW25.Effect.DexValueModify"}}: {{system.totaldex}}</b></div>{{/if}}
          {{#if system.totalagi}}<div><b>{{localize "SW25.Effect.AgiValueModify"}}: {{system.totalagi}}</b></div>{{/if}}
          {{#if system.totalstr}}<div><b>{{localize "SW25.Effect.StrValueModify"}}: {{system.totalstr}}</b></div>{{/if}}
          {{#if system.totalvit}}<div><b>{{localize "SW25.Effect.VitValueModify"}}: {{system.totalvit}}</b></div>{{/if}}
          {{#if system.totalint}}<div><b>{{localize "SW25.Effect.IntValueModify"}}: {{system.totalint}}</b></div>{{/if}}
          {{#if system.totalmnd}}<div><b>{{localize "SW25.Effect.MndValueModify"}}: {{system.totalmnd}}</b></div>{{/if}}
          {{#if system.totaldexmod}}<div><b>{{localize "SW25.Effect.DexModModify"}}: {{system.totaldexmod}}</b></div>{{/if}}
          {{#if system.totalagimod}}<div><b>{{localize "SW25.Effect.AgiModModify"}}: {{system.totalagimod}}</b></div>{{/if}}
          {{#if system.totalstrmod}}<div><b>{{localize "SW25.Effect.StrModModify"}}: {{system.totalstrmod}}</b></div>{{/if}}
          {{#if system.totalvitmod}}<div><b>{{localize "SW25.Effect.VitModModify"}}: {{system.totalvitmod}}</b></div>{{/if}}
          {{#if system.totalintmod}}<div><b>{{localize "SW25.Effect.IntModModify"}}: {{system.totalintmod}}</b></div>{{/if}}
          {{#if system.totalmndmod}}<div><b>{{localize "SW25.Effect.MndModModify"}}: {{system.totalmndmod}}</b></div>{{/if}}
          {{#if system.totalscmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.ScMod"}}: {{system.totalscmod}}</b></div>{{/if}}
          {{#if system.totalscckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.ScMod"}}: {{system.totalscckmod}}</b></div>{{/if}}
          {{#if system.totalscpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.ScMod"}}: {{system.totalscpwmod}}</b></div>{{/if}}
          {{#if system.totalcnmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.CnMod"}}: {{system.totalcnmod}}</b></div>{{/if}}
          {{#if system.totalcnckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.CnMod"}}: {{system.totalcnckmod}}</b></div>{{/if}}
          {{#if system.totalcnpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.CnMod"}}: {{system.totalcnpwmod}}</b></div>{{/if}}
          {{#if system.totalwzmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.WzMod"}}: {{system.totalwzmod}}</b></div>{{/if}}
          {{#if system.totalwzckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.WzMod"}}: {{system.totalwzckmod}}</b></div>{{/if}}
          {{#if system.totalwzpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.WzMod"}}: {{system.totalwzpwmod}}</b></div>{{/if}}
          {{#if system.totalprmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.PrMod"}}: {{system.totalprmod}}</b></div>{{/if}}
          {{#if system.totalprckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.PrMod"}}: {{system.totalprckmod}}</b></div>{{/if}}
          {{#if system.totalprpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.PrMod"}}: {{system.totalprpwmod}}</b></div>{{/if}}
          {{#if system.totalmtmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.MtMod"}}: {{system.totalmtmod}}</b></div>{{/if}}
          {{#if system.totalmtckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.MtMod"}}: {{system.totalmtckmod}}</b></div>{{/if}}
          {{#if system.totalmtpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.MtMod"}}: {{system.totalmtpwmod}}</b></div>{{/if}}
          {{#if system.totalfrmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.FrMod"}}: {{system.totalfrmod}}</b></div>{{/if}}
          {{#if system.totalfrckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.FrMod"}}: {{system.totalfrckmod}}</b></div>{{/if}}
          {{#if system.totalfrpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.FrMod"}}: {{system.totalfrpwmod}}</b></div>{{/if}}
          {{#if system.totaldrmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.DrMod"}}: {{system.totaldrmod}}</b></div>{{/if}}
          {{#if system.totaldrckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.DrMod"}}: {{system.totaldrckmod}}</b></div>{{/if}}
          {{#if system.totaldrpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.DrMod"}}: {{system.totaldrpwmod}}</b></div>{{/if}}
          {{#if system.totaldmmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.DmMod"}}: {{system.totaldmmod}}</b></div>{{/if}}
          {{#if system.totaldmckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.DmMod"}}: {{system.totaldmckmod}}</b></div>{{/if}}
          {{#if system.totaldmpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.DmMod"}}: {{system.totaldmpwmod}}</b></div>{{/if}}
          {{#if system.totalabmod}}<div><b>{{localize "SW25.Effect.MagicPower"}} / {{localize "SW25.Effect.AbMod"}}: {{system.totalabmod}}</b></div>{{/if}}
          {{#if system.totalabckmod}}<div><b>{{localize "SW25.Effect.MCast"}} / {{localize "SW25.Effect.AbMod"}}: {{system.totalabckmod}}</b></div>{{/if}}
          {{#if system.totalabpwmod}}<div><b>{{localize "SW25.Effect.MPower"}} / {{localize "SW25.Effect.AbMod"}}: {{system.totalabpwmod}}</b></div>{{/if}}
          {{#if system.totalallmgp}}<div><b>{{localize "SW25.Config.AllMgp"}}: {{system.totalallmgp}}</b></div>{{/if}}
          {{#if system.totalallmck}}<div><b>{{localize "SW25.Effect.MagicCKRoll"}} / {{localize "SW25.Item.All"}}: {{system.totalallmck}}</b></div>{{/if}}
          {{#if system.totalallmpw}}<div><b>{{localize "SW25.Effect.MagicPWRoll"}} / {{localize "SW25.Item.All"}}: {{system.totalallmpw}}</b></div>{{/if}}
          {{#if system.totalmpsc}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.ScMod"}}: {{system.totalmpsc}}</b></div>{{/if}}
          {{#if system.totalmpcn}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.CnMod"}}: {{system.totalmpcn}}</b></div>{{/if}}
          {{#if system.totalmpwz}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.WzMod"}}: {{system.totalmpwz}}</b></div>{{/if}}
          {{#if system.totalmppr}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.PrMod"}}: {{system.totalmppr}}</b></div>{{/if}}
          {{#if system.totalmpmt}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.MtMod"}}: {{system.totalmpmt}}</b></div>{{/if}}
          {{#if system.totalmpfr}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.FrMod"}}: {{system.totalmpfr}}</b></div>{{/if}}
          {{#if system.totalmpdr}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.DrMod"}}: {{system.totalmpdr}}</b></div>{{/if}}
          {{#if system.totalmpdm}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.DmMod"}}: {{system.totalmpdm}}</b></div>{{/if}}
          {{#if system.totalmpab}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Effect.AbMod"}}: {{system.totalmpab}}</b></div>{{/if}}
          {{#if system.totalmpall}}<div><b>{{localize "SW25.Effect.MPSave"}} / {{localize "SW25.Item.All"}}: {{system.totalmpall}}</b></div>{{/if}}
          {{#if system.totalmsckmod}}<div><b>{{localize "TYPES.Item.magicalsong"}} / {{localize "SW25.Effect.Performance"}}: {{system.totalmsckmod}}</b></div>{{/if}}
          {{#if system.totalmspwmod}}<div><b>{{localize "TYPES.Item.magicalsong"}} / {{localize "SW25.Effect.MPower"}}: {{system.totalmspwmod}}</b></div>{{/if}}
          {{#if system.totalatckmod}}<div><b>{{localize "TYPES.Item.alchemytech"}}: {{system.totalatckmod}}</b></div>{{/if}}
          {{#if system.totalewckmod}}<div><b>{{localize "TYPES.Item.essenceweave"}} / {{localize "SW25.Effect.Force"}}: {{system.totalewckmod}}</b></div>{{/if}}
          {{#if system.totalewpwmod}}<div><b>{{localize "TYPES.Item.essenceweave"}} / {{localize "SW25.Effect.MPower"}}: {{system.totalewpwmod}}</b></div>{{/if}}
          {{#if system.totallootmod}}<div><b>{{localize "SW25.Monster.Loot"}}: {{system.totallootmod}}</b></div>{{/if}}
          {{#if system.totalfinechkmod}}<div><b>{{localize "SW25.Item.Check.Packages.Finesse"}}{{localize "SW25.Check"}}: {{system.totalfinechkmod}}</b></div>{{/if}}
          {{#if system.totalmovechkmod}}<div><b>{{localize "SW25.Item.Check.Packages.Movement"}}{{localize "SW25.Check"}}: {{system.totalmovechkmod}}</b></div>{{/if}}
          {{#if system.totalobsechkmod}}<div><b>{{localize "SW25.Item.Check.Packages.Observation"}}{{localize "SW25.Check"}}: {{system.totalobsechkmod}}</b></div>{{/if}}
          {{#if system.totalknowchkmod}}<div><b>{{localize "SW25.Item.Check.Packages.Knowledge"}}{{localize "SW25.Check"}}: {{system.totalknowchkmod}}</b></div>{{/if}}
        </div>
      </div>
      <div>
        {{> "systems/sw25/templates/actor/parts/actor-effects.hbs"}}
      </div>
    </div>

    {{!-- Owned Items Tab --}}
    <div class="tab items" data-group="primary" data-tab="items">
      <div class="flexcol margin-s">
        <div class="grid grid-4col nogapmargin">
          <div class="grid-span-3"></div>
          <div class="flexrow resource-label flex-group-right tooltip"><label for="{{actor._id}}system.money"><i class="fa-solid fa-coins"></i><span class="tooltip-text">{{localize "SW25.Mymoney"}}</span></label> <input id="{{actor._id}}system.money" style="max-width: calc(60% - 7px);" type="text" name="system.money" value="{{system.money}}" data-dtype="Number"/> G</div>
        </div>
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-items.hbs"}}
        </div>
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-weapons.hbs"}}
        </div>
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-armors.hbs"}}
        </div>
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-accessories.hbs"}}
        </div>
      </div>
    </div>

    {{!-- Biography Tab --}}
    <div class="tab description flexcol" data-group="primary" data-tab="description">
      <div class="grid grid-5col margin-s">
        <div class="grid-span-2">
          {{> "systems/sw25/templates/actor/parts/actor-languages.hbs"}}
        </div>
        <div class="flexcol grid-span-3">
          <div class="flexrow grid grid-6col nogapmargin">
            <span class="grid-span-2" style="text-align: center;"><label for="{{actor._id}}system.attributes.born"><b>{{localize "SW25.Attributes.Born"}}</b></label><br>
            <input id="{{actor._id}}system.attributes.born" type="text" name="system.attributes.born" value="{{system.attributes.born}}" data-dtype="String"/></span>
            <span class="grid-span-2" style="text-align: center;"><label for="{{actor._id}}system.attributes.faith"><b>{{localize "SW25.Attributes.Faith"}}</b></label><br>
            <input id="{{actor._id}}system.attributes.faith" type="text" name="system.attributes.faith" value="{{system.attributes.faith}}" data-dtype="String"/></span>
            <span class="grid-span-2" style="text-align: center;"><label for="{{actor._id}}system.lootmod"><b>{{localize "SW25.Monster.Loot"}}{{localize "SW25.Modifier"}}</b></label><br>
            <input id="{{actor._id}}system.lootmod" type="text" name="system.lootmod" value="{{system.lootmod}}" data-dtype="Number"/></span>
          </div>
          <div class="flexrow grid grid-6col nogapmargin">
            <span class="grid-span-6" style="text-align: left;"><b>{{localize "SW25.Defaultitemskill"}}</b></span>
            <span class="grid-span-3" style="text-align: right;">{{localize "SW25.Selectherbskill"}}</span>
            <span class="grid-span-3" style="text-align: left;">
              <select name="system.herbskill">
                {{selectOptions skills selected=system.herbskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Item.None"}}
              </select>
            </span>
            <span class="grid-span-3" style="text-align: right;">{{localize "SW25.Selectpotionskill"}}</span>
            <span class="grid-span-3" style="text-align: left;">
              <select name="system.potionskill">
                {{selectOptions skills selected=system.potionskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Item.None"}}
              </select>
            </span>
            <span class="grid-span-3" style="text-align: right;">{{localize "SW25.Selectrepairskill"}}</span>
            <span class="grid-span-3" style="text-align: left;">
              <select name="system.repairskill">
                {{selectOptions skills selected=system.repairskill valueAttr="name" labelAttr="name" localize=true blank="SW25.Item.None"}}
              </select>
            </span>
          </div>
        </div>
      </div>
          <div class="character-honor">
            <label for="{{actor._id}}honor" class="resource-label">{{localize "SW25.Attributes.Honer.Label"}}</label>
            <input id="{{actor._id}}honor" type="number" name="system.attributes.honer.value" value="{{system.attributes.honer.value}}" placeholder="Rep." data-dtype="Number"/>
          </div>
          <div class="character-impurity">
            <label for="{{actor._id}}impurity" class="resource-label">{{localize "SW25.Attributes.Impurity"}}</label>
            <div class="adjustable-container">
              <a class="adjustment-button" data-action="decrease" data-property="system.attributes.impurity">
                <i class="fas fa-minus"></i>
              </a>
              <input id="{{actor._id}}impurity" type="number" name="system.attributes.impurity" value="{{system.attributes.impurity}}" data-dtype="Number"/>
              <a class="adjustment-button" data-action="increase" data-property="system.attributes.impurity">
                <i class="fas fa-plus"></i>
              </a>
            </div>
          </div>

      <div>
        <span><b>{{localize "SW25.Biography"}}</b></span>
        {{editor system.biography target="system.biography" rollData=rollData button=true owner=owner editable=editable}}
      </div>
    </div>

  </section>
  {{/unless}}

  {{#if system.toFellow}}
  {{!-- Fellow Tab Navigation --}}
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="fellowAction">{{localize "SW25.ActionTable"}}</a>
    <a class="item" data-tab="fellowSetting">{{localize "SW25.Setting"}}</a>
  </nav>

  {{!-- Fellow Sheet Body --}}
  <section class="sheet-body">

    {{!-- Fellow Action Tab --}}
    <div class="tab fellowAction flexcol" data-group="primary" data-tab="fellowAction">
      {{#if (eq system.tabletype "fellow")}}
      <div class="flexcol margin-s">
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-actions-fellow.hbs"}}
        </div>
      </div>
      {{/if}}
      {{#if (eq system.tabletype "daemon")}}
      <div class="flexcol margin-s">
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-actions-daemon.hbs"}}
        </div>
      </div>
      {{/if}}
      <div class="margin-m" style="display: flex; align-items: center;">
        <input type="checkbox" id="{{actor._id}}system.attributes.showaction" name="system.attributes.showaction" data-dtype="Boolean" {{#if system.attributes.showaction}} checked {{/if}}/>
        <label for="{{actor._id}}system.attributes.showaction">{{localize "SW25.Attributes.Showaction"}}</label>
      </div>
      {{#if system.attributes.showaction}}
      <div class="flexcol margin-s">
        <div>
          {{> "systems/sw25/templates/actor/parts/actor-actions.hbs"}}
        </div>
      </div>
      {{/if}}
    </div>

    {{!-- Fellow Setting Tab --}}
    <div class="tab fellowSetting flexcol" data-group="primary" data-tab="fellowSetting">
      <div class="grid grid-10col margin-s">
        <span class="grid-span-2" style="text-align: center;"><b>{{localize "SW25.Item.Action.TableType"}}</b><br>
          <select name="system.tabletype">
            {{selectOptions config.fellowTypes selected=system.tabletype localize=true}}
         </select>
        </span>
        <span class="grid-span-8"></span>
        <span class="grid-span-10" style="text-align: left;"><label for="{{actor._id}}system.canceldialog"><b>{{localize "SW25.CancelDialog"}}</b></label><br>
        <input id="{{actor._id}}system.canceldialog" type="text" name="system.canceldialog" value="{{system.canceldialog}}" data-dtype="String"/></span>        
      </div>


          <hr>
          {{#if system.toFellow}}
          <div class="character-details-secondary textalign-center flexrow">
            <div class="character-race">
              <label for="{{actor._id}}race" class="resource-label">{{localize "SW25.Race"}}</label> 
              <input id="{{actor._id}}race" type="text" name="system.race" value="{{system.race}}" placeholder="Race" data-dtype="String"/>
            </div>
            <div class="character-age">
              <label for="{{actor._id}}age" class="resource-label">{{localize "SW25.Attributes.Age"}}</label>
              <input id="{{actor._id}}age" type="number" name="system.attributes.age" value="{{system.attributes.age}}" placeholder="Age" data-dtype="Number"/>
            </div>
            <div class="character-gender">
              <label for="{{actor._id}}gender" class="resource-label">{{localize "SW25.Attributes.Gender"}}</label>
              <input id="{{actor._id}}gender" type="text" name="system.attributes.gender" value="{{system.attributes.gender}}" placeholder="Gender" data-dtype="String"/>
            </div>
            <div class="character-fellowexp">
              <label for="{{actor._id}}fellowexp" class="resource-label">{{localize "SW25.Attributes.Exp"}}</label> <br>
              <input id="{{actor._id}}fellowexp" type="checkbox" name="system.attributes.fellowexp" {{#if system.attributes.fellowexp}}checked{{/if}} data-dtype="Boolean"/>
            </div>
            <div class="character-fellowreward">
              <label for="{{actor._id}}fellowreward" class="resource-label">{{localize "SW25.Reward"}}</label> <br>
              <input id="{{actor._id}}fellowreward" type="checkbox" name="system.attributes.fellowreward" {{#if system.attributes.fellowreward}}checked{{/if}} data-dtype="Boolean"/>
            </div>
          </div>
          <hr>
          <div class="character-details-tertiary textalign-left flexrow">
            <div class="character-fellowlanglabel">
              <span for="{{actor._id}}fellowlang" class="resource-label">{{localize "SW25.Languages"}}:</span>
            </div>
            <div class="character-fellowlang">
              <span class="langlist">{{system.attributes.langlist}}</span>
            </div>
          </div>
          <hr>
          <div class="character-details-tertiary textalign-left flexrow">
            <div class="character-fellowmemolabel">
              <span for="{{actor._id}}fellowmemo" class="resource-label">{{localize "SW25.Fellowmemo"}}:</span>
            </div>
            <div class="character-fellowmemo">
              <textarea id="{{actor._id}}fellowmemo" class="textarea-editor" type="text" name="system.fellowmemo" placeholder="Memo" style="width: 100%; height: 40px;">{{system.fellowmemo}}</textarea>
            </div>
          </div>
          {{/if}}
    </div>

  </section>
  {{/if}}



    </section>
  </main>
</form>